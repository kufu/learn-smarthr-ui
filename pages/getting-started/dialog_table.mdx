export const meta =  {
  title: 'Dialog / Tableを使ったレンダリング',
  description: '',
}

import { Layout } from '@/features/layout'
import { SmartHRUIPreview } from '@/features/smarthr-preview'

export default ({ children }) => <Layout meta={meta}>{children}</Layout>

DialogコンポーネントとTableコンポーネントの使い方を通して、より実践的なコンポーネントの扱い方を学びましょう。

ここまでのドキュメントでも分かる通り、コンポーネントをただ設置するだけで実装が完了するケースはほとんどありません。
SmartHRのプロダクトでは、特によく使われるコンポーネントとしてDialogとTableが挙げられます。
これらを使いこなすことで、より実践的な実装を始める一歩になるでしょう。

## Dialogによる状態管理の基本

Dialogコンポーネントを使うことがコンポーネントの状態管理を学ぶための第1歩になります。
以下のコードはシンプルにActionDialogを表示する例です。

<SmartHRUIPreview
  files={{
    'App.tsx': `import { useState } from 'react'
import { ActionDialog, Button } from 'smarthr-ui'

export default function App() {
  const [openedDialog, setOpenedDialog] = useState<'opened' | null>(null)
  const onClickClose = () => setOpenedDialog(null)
  return (
    <>
      <Button onClick={()=> setOpenedDialog('opened')}>わたしを押して</Button>
      <ActionDialog
        isOpen={openedDialog === 'opened'}
        title="こんにちは！"
        actionText="保存"
        onClickAction={(closeDialog) => closeDialog()}
        onClickClose={onClickClose}
      >
        <div style={{padding: '24px'}}>これはActionDialogです。</div>
      </ActionDialog>
    </>
  )
}`,
  }}
/>

このコードでは、ボタンを押すことでActionDialogが表示され、保存ボタンを押すことでActionDialogが閉じるようになっています。

`openedDialog`は、Dialogの開閉状態を管理するためのstateで、nullの場合はDialogが閉じている状態、'opened'の場合はDialogが開いている状態になります。

`onClick`や`onClickClose`などのイベント実行時に`setOpenedDialog`を通して値を変更し、Dialogの開閉を制御しています。

静的なパターンだけでなく、状態を網羅して設計するのはプロダクトデザインの基本ですが、実装においてもこのようなパターンはよくあるパターンとして使われています。
つまり書き方や表現が異なりこそしますが、実装においても、モックアップの設計においても、同じような思考が必要ということがわかるかと思います。

### 関連リンク

[Dialog | コンポーネント | SmartHR Design System](https://smarthr.design/products/components/dialog/)


## Tableを使ったレンダリング

Tableコンポーネントは、いずれかのデータをレンダリングするためのコンポーネントす。
SmartHRにおいてはオブジェクト一覧からデータログなど、様々な場面で使われるコンポーネントですが、静的に使われるパターンは少なく、もっぱら動的に出力されることが最も多いコンポーネントといってもいいでしょう。

以下のコードはTableを動的にレンダリングした基本的な例です。

<SmartHRUIPreview
  files={{
    'App.tsx': `import { useState } from 'react'
import { Table, Td, Th, Button } from 'smarthr-ui'
import { dummyData } from './data.ts'

export default function App() {
  return (
    <Table>
      <thead>
        <tr>
          <Th>
            Name
          </Th>
          <Th>
            Calories
          </Th>
          <Th>Fat (g)</Th>
          <Th>Carbs (g)</Th>
          <Th>Protein (g)</Th>
          <Th>Button</Th>
        </tr>
      </thead>
      <tbody>
        {dummyData.map(({ name, calories, fat, carbs, protein }, i) => (
          <tr key={name}>
            <Td>{name}</Td>
            <Td>{calories}</Td>
            <Td>{fat}</Td>
            <Td>{carbs}</Td>
            <Td>{protein}</Td>
            <Td>
              <Button size="s">Button</Button>
            </Td>
          </tr>
        ))}
      </tbody>
    </Table>
  )
}`,
 'data.ts': `export const dummyData = [
  {
    name: 'Tea',
    calories: 0,
    fat: 0,
    carbs: 0,
    protein: 0,
  },
  {
    name: 'Smoothie',
    calories: 10,
    fat: 0,
    carbs: 34.5,
    protein: 1.0,
  },
  {
    name: 'Milk',
    calories: 199,
    fat: 7.8,
    carbs: 9.9,
    protein: 6.8,
  },
  {
    name: 'Coffee',
    calories: 39,
    fat: 7.8,
    carbs: 10.9,
    protein: 0,
  },
  {
    name: 'Orange Juice',
    calories: 200,
    fat: 100.0,
    carbs: 10,
    protein: 300,
  },
  {
    name: 'Apple Juice',
    calories: 130,
    fat: 200,
    carbs: 99,
    protein: 68,
  },
  {
    name: 'Green Tea',
    calories: 300,
    fat: 100,
    carbs: 10,
    protein: 41,
  },
  {
    name: 'Oolong Tea',
    calories: 100,
    fat: 10,
    carbs: 9,
    protein: 600,
  },
]`
  }}
/>


'App.tsx' では、SmartHR UIライブラリから Table, Td, Th, Button コンポーネントをインポートし、テーブルを作成しています。
ダミーデータは 'data.ts' から`import`され、map関数を使用してテーブルの各行に展開されています。

ここで初めて`import { hoge } from 'smarthr-ui'`以外で`import`を使っていますが、この書き方についても少し触れておきます。
`import`は他のモジュールやライブラリから機能やオブジェクトをインポートし、現在のファイルで使用できるようにするJavaScriptの構文です。
一方で`export`は、モジュールから関数やオブジェクトを公開するために使います。上述のコードでは`dummyData`を`export`していますが、これにより他のファイルから`import`が可能になります。

`map`という記述はmap関数と呼ばれるもので、コンポーネントのリストを表示させる重要なメソッドです。
map関数を使って、dummyData という配列を受け取って中身を引数で取得、`<Td>`に値を渡して表示させています。

### 関連リンク

- [Table | コンポーネント | SmartHR Design System](https://smarthr.design/products/components/table/)
- [import - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/import)
- [export - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/export)
- [Rendering Lists](https://react.dev/learn/rendering-lists)
